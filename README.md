# CheckID v2

![logo](checkid.jpeg)

CheckID is a powerful facial recognition API that provides comprehensive identity verification solutions. üöÄ It compares faces from different images, validates identification documents, and offers flexible encoding options for secure identity verification. üîê Perfect for authentication, security applications, and document validation! üí°‚ú®

## Features
- **Face Comparison**: Compare two face images to verify if they belong to the same person
- **Binary Encoding**: Generate and compare facial encodings in hexadecimal format
- **DNI Verification**: Validate identification documents with face matching and number verification
- **Flexible Storage**: Support for both direct binary strings and hex files
- **Google Vision Integration**: Enhanced document analysis capabilities
- **Easy Deployment**: Docker support and native Python execution

---

## Prerequisites

### Google Vision API Setup
Before using the DNI verification features, you need to set up Google Vision API credentials:

1. Create a Google Cloud Project and enable the Vision API
2. Generate a service account key (JSON format)
3. Save the credentials file as `.venv/checkIDagent.json` in your project root directory

**Important**: The `.venv/checkIDagent.json` file is required for document verification features to work properly.

---

## API Endpoints

### 1. **Compare Two Faces**
**URL:** `/compare2faces/`  
**Method:** `POST`  
**Content-Type:** `multipart/form-data`

**Parameters:**
- `file1` (image) - First face image (.png, .jpg)
- `file2` (image) - Second face image (.png, .jpg)

**Description:** Compares two face images and determines if they belong to the same person.

**Response:**
```json
{
    "is_same": true,
    "distance": 0.25,
    "encode_faces": [
        "ENCODED_DATA_FROM_IMAGE_1",
        "ENCODED_DATA_FROM_IMAGE_2"
    ]
}
```

---

### 2. **Compare Image with Binary String**
**URL:** `/binary_compare/`  
**Method:** `POST`  
**Content-Type:** `multipart/form-data`

**Parameters:**
- `file` (image) - Face image to compare (.png, .jpg)
- `binary` (string) - Hexadecimal encoding of another face image

**Description:** Compares a face image with a hexadecimal string that represents the encoding of another face. Useful when comparing against stored face encodings.

**Response:**
```json
{
    "is_same": false,
    "distance": 0.48
}
```

---

### 3. **Get Binary Encoding**
**URL:** `/get_binary/`  
**Method:** `POST`  
**Content-Type:** `multipart/form-data`

**Parameters:**
- `file` (image) - Face image to encode (.png, .jpg)

**Description:** Generates a binary (hexadecimal) encoding of the uploaded face image. This result can be saved and later used in comparisons.

**Response:**
```json
{
    "result": "HEXADECIMAL_ENCODED_FACE_DATA"
}
```

---

### 4. **Compare Image with Hex File**
**URL:** `/compare_binary/`  
**Method:** `POST`  
**Content-Type:** `multipart/form-data`

**Parameters:**
- `image` (image) - Face image to compare (.png, .jpg)
- `hex_file` (file) - Hexadecimal file containing facial encoding (.hex)

**Description:** Compares a face image with a hexadecimal file containing a facial encoding (generated by the `/get_binary/` endpoint). The hex file must be uploaded as a .hex file and is loaded using pickle.

**Response:**
```json
{
    "is_same": true,
    "distance": 0.15
}
```

---

### 5. **DNI Verification** üÜî
**URL:** `/verify_dni/`  
**Method:** `POST`  
**Content-Type:** `multipart/form-data`

**Parameters:**
- `face_image` (image) - Face image to verify (.png, .jpg)
- `dni_image` (image) - DNI/ID document image (.png, .jpg)
- `dni_number` (string) - DNI number (e.g., '12345678A')

**Description:** Verifies if the face in the provided image matches the face on the DNI image and checks if the DNI number is valid using Google Vision API.

**Response:**
```json
{
    "face_comparison": {
        "is_same": true,
        "distance": 0.18
    },
    "dni_number": "12345678A",
    "dni_valid": true
}
```

---

## Distance Interpretation

The `distance` value represents the similarity between faces:
- **0.0 - 0.3**: Very high similarity (likely same person)
- **0.3 - 0.6**: Moderate similarity (possible match, review recommended)
- **0.6 - 1.0**: Low similarity (likely different people)

---

## Deployment Options

### Option 1: Build Your Own Docker Image

If you want to use a Docker container with your own modifications:

```bash
# Clone the repository
git clone https://github.com/JorgeArguello1999/CheckID.git
cd CheckID

# Build the Docker image
docker build . -t "checkid:2.0"

# Run the container
docker run -d -p 8000:8000 checkid:2.0
```

### Option 2: Download Docker Image

Download the pre-built Docker image from Docker Hub:

```bash
# Pull the image
docker pull jorgearguello/checkid:latest

# Run the container
docker run -d -p 8000:8000 jorgearguello/checkid:latest
```

### Option 3: Run with Python

For development or custom modifications:

```bash
# Clone the repository
git clone https://github.com/JorgeArguello1999/CheckID.git

# Navigate to directory
cd CheckID

# Install dependencies
pip install -r pyproject.toml

# Ensure Google Vision credentials are in place
# Place your Google Cloud service account JSON file at:
# .venv/checkIDagent.json

# Run the application
python main.py
```

---

## File Requirements

### Supported Image Formats
- `.png`
- `.jpg`
- `.jpeg`

### Required Configuration Files
- `.venv/checkIDagent.json` - Google Cloud Vision API service account credentials (required for DNI verification)

---

## Usage Examples

### Basic Face Comparison
```bash
curl -X POST "http://localhost:8000/compare2faces/" \
  -F "file1=@person1.jpg" \
  -F "file2=@person2.jpg"
```

### DNI Verification
```bash
curl -X POST "http://localhost:8000/verify_dni/" \
  -F "face_image=@selfie.jpg" \
  -F "dni_image=@dni_front.jpg" \
  -F "dni_number=12345678A"
```

### Generate Face Encoding
```bash
curl -X POST "http://localhost:8000/get_binary/" \
  -F "file=@face.jpg"
```

---

## Contributing

We welcome contributions to CheckID! Here's how you can help:

1. Fork the repository
2. Create a feature branch (`git checkout -b feature/amazing-feature`)
3. Commit your changes (`git commit -m 'Add amazing feature'`)
4. Push to the branch (`git push origin feature/amazing-feature`)
5. Open a Pull Request

Feel free to:
- Report bugs by opening issues
- Suggest new features
- Improve documentation
- Submit code improvements

Visit our [GitHub repository](https://github.com/JorgeArguello1999/CheckID.git) to get started!

---

## License

This project is licensed under the MIT License. See the `LICENSE` file for more details.

---

## Support

If you encounter any issues or have questions:
- üìß Open an issue on [GitHub](https://github.com/JorgeArguello1999/CheckID.git)
- üìö Check the documentation above
- üîç Review the API response format for troubleshooting

---

üöÄ **Developed by Jorge Arguello** | [GitHub Profile](https://github.com/JorgeArguello1999/)

---

‚≠ê **Star this repository if CheckID helped you with your project!**